<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Раздел 3 - HTML/HTTP/Формы</title>
  <meta name="description" content="Учебник по PHP от HTML Academy.">

  <link rel="stylesheet" href="assets/main.css">
  <link rel="alternate" type="application/rss+xml" title="PHP-guide" href="/feed.xml">


</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">PHP-guide</a>

    <nav class="site-nav">
      <!-- <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span> -->

      <!-- <div class="trigger">


          <a class="page-link" href="/content-01">Раздел 1 - Вводный</a>



          <a class="page-link" href="/content-02">Раздел 2 - Заканчиваем с азами</a>



          <a class="page-link" href="/content-03">Раздел 3 - HTML/HTTP/Формы</a>



          <a class="page-link" href="/content-04">Раздел 4 - Хранение состояния</a>



          <a class="page-link" href="/content-05">Раздел 5 - Реляционные базы данных: теория и практика</a>



          <a class="page-link" href="/content-06">Раздел 6 - Практика работы с MySQL</a>



          <a class="page-link" href="/content-07">Раздел 7 - Теория ООП и использование в PHP</a>






      </div> -->
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Раздел 3 - HTML/HTTP/Формы</h1>
  </header>

  <div class="post-content">
    <h2 id="Как-php-взаимодействует-с-html">Как PHP взаимодействует с HTML</h2>
<p>Как следует из названия, HTML - это язык разметки. Это означает, что с помощью HTML мы можем описать только как должна выглядеть веб-страница и что она будет содержать. Т.к. HTML - это не язык программирования, содержимоей этой веб-страницы будет статичным, т.е. не содержать никакой логики, не меняться в зависимости от каких либо условий и так далее.<br />
Это не является большой проблемой, когда речь идет странице с описанием биографии или просто сайте с обычными информационными статьями.<br />
Но сделать страничку, которая будет показывать погоду в городе посетителя, к примеру, на HTML уже нельзя.</p>

<p>PHP, в свою очередь, это язык программирования. Мы можем с его помощью реализовать сколь угодно сложные сценарии, наши возможности практически ничем не ограничены. Но в конечном счете, результат работы любого сценария должен быть показан конечному пользователю, а чаще всего это будет веб-страница.<br />
Есть два варианта “связывания” PHP и HTML:</p>
<ul>
  <li>PHP сценарии встраиваются прямо внутри HTML тегов</li>
  <li>PHP сценарий сам выводит нужный HTML код</li>
</ul>

<p>Рассмотрим оба случая.<br />
Чтобы преобразовать HTML страницу в PHP сценарий достаточно выполнить два шага:</p>
<ol>
  <li>Сменить расширение файла с .html на .php</li>
  <li>Вставить внутрь HTML кода PHP сценарий. Например, это может выглядеть так:</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;Текущее время: &lt;?php print(date("H:i:s")); ?&gt;&lt;/h1&gt;
</code></pre></div></div>

<p>В этом примере мы встроили PHP код прямо внутрь HTML и вывели текущее время внутри тега <code class="highlighter-rouge">&lt;h1&gt;</code>.<br />
Такой способ интеграции почти всегда предпочтителен, в следующем разделе будет показано почему.</p>

<p>Во втором случае, сценарий будет состоять из PHP кода, который выводит уже подготовленный HTML. Пример:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
print("&lt;h1&gt;Текущее время: " . date("H:i:s") . "&lt;/h1&gt;");
</code></pre></div></div>
<p>Результат работы обоих примеров будет абсолютно одинаков, но в первом случае наш код легче для восприятия, страница остается по сути HTML кодом с вкраплениями PHP, а значит её легче редактировать и дорабатывать.</p>

<h2 id="Шаблонизация-и-понятие-шаблонов">Шаблонизация и понятие шаблонов</h2>
<p>Шаблонизация - это процесс разделения нашей программы на две составляющей. Одна часть будет ответственна непосредственно за саму логику сценария, т.е. выполнение вычислений, определение условий и т.д., т.е. основную часть работы, а вторая часть будет должна всего лишь показывать результат работы первой части внутри HTML кода.</p>

<p>Зачем это нужно? Самое главное преимущество такого подхода - это разделение труда. Т.е. программист, который хорошо знает PHP сможет спокойно работать и даже не задумываться как и каким образом будут показаны результатирующие данные, а с другой стороны, верстальщик, который хорошо знает как оформлять HTML-документы сможет после совсем небольшого обучения, использовать результаты работы PHP программиста.</p>

<p>Кроме того, если код оформляется по этим стандартам, то его становится намного проще воспринимать, потому что не будет мешанины из PHP и HTML в одном файле.<br />
Перепишем наш пример, используя технику шаблонизации. В этом случае у нас будет один файл, но в будущих уроках покажем как выделять шаблоны в отдельные файлы.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php $time = date("H:i:s"); ?&gt;

&lt;h1&gt;Текущее время: &lt;?=$time;?&gt;&lt;/h1&gt;
</code></pre></div></div>

<p>В этом примере есть одна новая вещь: краткий оператор вывода <code class="highlighter-rouge">?&gt;</code>. Он заменяет знакомый нам <code class="highlighter-rouge">print</code> и служит для вывода на экран.</p>

<h2 id="Протокол-http">Протокол HTTP</h2>
<p>Как работает WWW (всемирная паутина, веб) в двух словах:</p>
<ul>
  <li>браузер пользователя (клиент) отсылает на сервер запрос с адресом сайта (URL)</li>
  <li>сервер получает этот запрос и отдает клиенту требуемый тому контент</li>
</ul>

<p>Иными словами, весь современный веб построен на модели клиент-серверного взаимодействия. И чтобы весь этот процесс оказался возможным, необходим универсальный язык-протокол, который будет понимать и сервер и браузер.  Такой протокол есть, а называется он просто - HTTP.</p>

<h3 id="Как-работает-http-и-зачем-нам-это-знать">Как работает HTTP и зачем нам это знать</h3>
<p>Программировать на PHP можно и без знания протокола HTTP, но есть ряд ситуаций, когда для решения определенных задач знание о том, как функционирует сервер, становится просто необходимым. Ведь PHP - это в первую очередь серверный язык программирования.</p>

<p>Протокол HTTP очень прост и состоит, по сути, из двух частей:</p>
<ul>
  <li>заголовки запроса/ответа</li>
  <li>тело запроса/ответа</li>
</ul>

<p>Всегда вначале идет список заголовков, затем пустая строка, а затем (если есть) тело запроса/ответа.</p>

<p>И клиент и сервер могут посылать друг другу заголовки и тело, но только в случае с клиентом доступные заголовки будут одни, а с сервером - другие.
Рассмотрим пошагово как будет выглядеть работа по протоколу HTTP в случае, когда пользователь хочет загрузить главную страницу социальной сети “Вконтакте”.</p>

<ol>
  <li>Браузер пользователя устанавливает соединение с сервером vk.com и отправляет следующий запрос:</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET / HTTP/1.1
Host: vk.com
</code></pre></div></div>

<ol>
  <li>Сервер принимает запрос и отправляет ответ:</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
Server: Apache

<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;&lt;title&gt;</span>ВКонтакте<span class="nt">&lt;/title&gt;&lt;/head&gt;</span>
<span class="c">&lt;!-- остальной контент страницы ниже --&gt;</span>
</code></pre></div></div>

<ol>
  <li>Браузер принимает ответ и показывает готовую страничку</li>
</ol>

<p>Больше всего нам интересен самый первый шаг, где браузер иницирует запрос в серверу vk.com<br />
Рассмотрим подробнее что тут происходит:
Самая первая строка этого запроса опредеяет несколько важных параметров, а именно:</p>
<ul>
  <li>метод, которым будет запрошен контент</li>
  <li>адрес страницы</li>
  <li>версия протокола</li>
</ul>

<p><code class="highlighter-rouge">GET</code> - это метод (глагол) который мы применяем для доступа к указанной странице. <br />
<code class="highlighter-rouge">GET</code> является самым часто используемым методом, потому что он говорит серверу о том, что клиент всего лишь хочет прочитать указанный документ. Но помимо <code class="highlighter-rouge">GET</code> есть и другие методы, а один из них рассмотрим уже в следующем разделе.</p>

<p>После метода идет указание на адрес страницы - URI (универсальный идентификатор ресурса). В нашем случае мы запрашиваем главную страницу сайта, поэтому используется просто слеш - <code class="highlighter-rouge">/</code>.<br />
Последним в этой строке идет версия протокола и почти всегда это будет <code class="highlighter-rouge">HTTP/1.1</code></p>

<p>После строки с указанием основных параметров всегда следует перечисление заголовков, которые передают серверу дополнительную, полезную информацию: название и версия браузера, язык, кодировка, параметры кэширования и т.д.<br />
Среди всех этих заголовков, которые передаются при каждом запросе, есть один обязательный и самый важный - это заголовок <code class="highlighter-rouge">Host</code>. Именно он определяет адрес домена, который запрашивает браузер клиента.</p>

<p>Сервер, в свою очередь, получив запрос ищет у себя сайт с доменом из заголовка <code class="highlighter-rouge">Host</code>, а также указанную страницу.<br />
Если запрошенный сайт и страница найдены, клиенту отправляется ответ:<br />
<code class="highlighter-rouge">HTTP/1.1 200 OK</code>
Такой ответ означает, что все хорошо, документ найден и будет отправлен клиенту.
Если говорить более обобщенно, стартовая строка ответа имеет следующую структуру:<br />
<code class="highlighter-rouge">HTTP/Версия Код состояния Пояснение</code></p>

<p>Больше всего здесь интересен именно код состояния, он же код ответа сервера.<br />
 В этом примере код ответа - 200, что означает: сервер работает, документ найден и будет передан клиенту.  Но не всегда все идет гладко.<br />
 Например, запрошенный документ может отсутствовать или сервер будет перегружен, в таком случае клиент не получит контент, а код ответа будет отличным от 200.</p>
<ul>
  <li>404 - если сервер доступен, но запрошенный документ не найден</li>
  <li>503 - если сервер не может обрабатывать запросы по техническим причинам</li>
</ul>

<p>Спецификация HTTP 1.1 определяет 40 различных кодов HTTP.<br />
После стартовой строки следуют заголовки, а также тело ответа.</p>

<h2 id="Формы">Формы</h2>
<p>Формы - это часть языка HTML. Формы нужны для передачи любых данных от клиента на сервер. Чаще всего формы используются для регистрации пользователей, заполнения анкет, оформления заказа в интернет магазине и т.д.<br />
Отправлять можно как простую текстовую информацию, так и целые файлы.<br />
Большую часть времени программирования на PHP вы будете так или иначе работать с формами и данными из них.</p>

<p>HTML описывает как выглядит форма: из каких полей и других элементов она состоит, но без принимающей стороны, т.е. сервера, который принимает эти данные и обрабатывает их нужным образом, создавать формы нет никакого смысла.</p>

<p>PHP содержит множество удобных средств для работы с формами, что позволяет очень просто решать типичные задачи, которые часто возникают в веб-программировании:</p>
<ul>
  <li>регистрация и аутентификация пользователя</li>
  <li>отправка комментариев на форумах и соц. сетях</li>
  <li>оформление заказов</li>
</ul>

<p>Практически любой современный сайт содержит как минимум несколько разных форм.</p>

<h3 id="Отправка-формы">Отправка формы</h3>
<p>Рассмотрим один типичный пример - форма обратной связи. Чтобы дать посетителю сайта возможность связаться с его авторами, как правило используются формы обратной связи, где человек указывает как минимум свое имя, email для обратной связи и сам текст своего сообщения.<br />
Такая форма может выглядеть в HTML следующим образом:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;form name="feedback" method="POST" action="form.php"&gt;
&lt;label&gt;Ваше имя: &lt;input type="text" name="name"&gt;&lt;/label&gt;
&lt;label&gt;Ваш email: &lt;input type="text" name="email"&gt;&lt;/label&gt;
&lt;label&gt;Сообщение: &lt;textarea name="message"&gt;&lt;/textarea&gt;&lt;/label&gt;

&lt;input type="submit" name="send" value="Отправить"&gt;
&lt;/form&gt;
</code></pre></div></div>

<p>Это очень простая форма, состоящая из трех полей и одной кнопки отправки.</p>

<p>Почти весь приведенный код описывает внешний вид и содержание формы, но следует обратить внимание на два аттрибута тега <code class="highlighter-rouge">&lt;form&gt;</code>, которые нужны для указания на способ обработки данных:</p>

<ul>
  <li><code class="highlighter-rouge">method</code> - этот аттрибут используется для определения метода HTTP, который будет использован для передачи данных на сервер. Вы уже знакомы с HTTP методом <code class="highlighter-rouge">GET</code>, предписывающий серверу просто вернуть определенный документ.<br />
Метод <code class="highlighter-rouge">POST</code> наоборот сообщает о намерении передать на сервер некоторую информацию, что, впрочем, не отменяет последующее получение контента.</li>
  <li><code class="highlighter-rouge">action</code> - содержит адрес PHP скрипта, который должен обработать эту форму</li>
</ul>

<p>После нажатия кнопки “отправить” браузер выполняет POST запрос, который содержит введенные данные, на адрес, указанный в аттрибуте <code class="highlighter-rouge">action</code>.</p>

<h3 id="Обработка-формы">Обработка формы</h3>

<p>После отправки формы, управление передается php скрипту, который должен получить переданные данные, выполнить с ними какие либо действия (например, сохранить в базе данных) и показать результат.<br />
Результатом может быть простое сообщение <em>“ваши данные успешно отправлены”</em>.</p>

<p>Поэтому в первую очередь требуется научиться в сценарии получать данные из формы.<br />
К счастью, в PHP это очень просто - <strong>все данные из формы находятся в глобальном ассоциативном массиве <code class="highlighter-rouge">$_POST</code></strong>.<br />
Этот массив всегда будет неявно присутствовать в сценарии, если он был загружен по методу <code class="highlighter-rouge">POST</code>.<br />
Каждое поле из формы будет находиться в массиве, где ключом будет значение аттрибута <code class="highlighter-rouge">name</code>, а значением содержимое поля.<br />
Например, чтобы из формы всю информацию на экран, можно написать такой сценарий:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
if (isset($_POST)) {
    print("Имя: " . $_POST['name']);
    print("&lt;br&gt;Email: " . $_POST['email']);
    print("&lt;br&gt;Сообщение: " . $_POST['message']);
}

</code></pre></div></div>

<p>Функция <code class="highlighter-rouge">isset</code> служит для определения существует ли переданная ей переменная. Так мы проверяем, что сценарий загружен методом <code class="highlighter-rouge">POST</code>, т.е. была отправлена форма.</p>

<p>Как правило, после обработки формы в PHP, сценарий должен переадресовать пользователя на другую страницу, потому что если форма была отправлена через метод <code class="highlighter-rouge">POST</code>, то при обновлении страницы пользователем, данные будут отправлены еще раз, а это в большинстве случаев нежелательное поведение.</p>

<h3 id="Отправка-файлов">Отправка файлов</h3>

<p>Помимо текстовой информации, существует возможность отправлять на сервер файлы любых типов.<br />
Пример формы для загрузки файла:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;form name="file_upload" method="POST" action="form.php" enctype="multipart/form-data"&gt;
&lt;label&gt;Ваш аватар: &lt;input type="file" name="avatar"&gt;&lt;/label&gt;
&lt;input type="submit" name="send" value="Отправить файл"&gt;
&lt;/form&gt;
</code></pre></div></div>

<p>Тут есть два важных отличия от первого примера:</p>
<ul>
  <li>добавился новый аттрибут <code class="highlighter-rouge">enctype</code> который всегда должен иметь значение <code class="highlighter-rouge">multipart/form-data</code>. Если его не будет, то файл просто не отправится.</li>
  <li>сам файл загружается при помощи поля с типом “file”</li>
</ul>

<p>В PHP загруженный файл будет доступен в другом специальном массиве - <code class="highlighter-rouge">$_FILES</code>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
if (isset($_FILES['avatar'])) {
    $file = $_FILES['avatar'];

    print("Загружен файл с именем " . $file['name'] . " и размером " . $file['size'] . " байт");
}
</code></pre></div></div>

  </div>

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">PHP-guide</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>

              PHP-guide

            </li>

            <li><a href="mailto:mail@htmlacademy.ru">mail@htmlacademy.ru</a></li>

        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">

          <li>
            <a href="https://github.com/htmlacademy"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">htmlacademy</span></a>

          </li>



        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Учебник по PHP от HTML Academy.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
